@model TDTU_IT_alumni_management_system.Models.Banner

@{
    ViewBag.Title = "Chỉnh sửa banner";
    Layout = "~/Areas/Admin/Views/Shared/LayoutAdmin.cshtml";
}
<!-- Modal hiển thị thông báo lỗi -->
<div class="modal fade" id="errorModal" tabindex="-1" role="dialog" aria-labelledby="errorModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title" id="errorModalLabel">Lỗi</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <!-- Hiển thị thông báo lỗi -->
                <p>@TempData["ErrorMessage"]</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
            </div>
        </div>
    </div>
</div>
<div class="panel panel-default">
    <div class="panel-body">
        <h2>Chỉnh sửa banner</h2>
        @using (Html.BeginForm("Edit", "Banners", FormMethod.Post, new { enctype = "multipart/form-data" }))
        {
            @Html.AntiForgeryToken()
            <div class="form-horizontal">
                <h4>Banner</h4>
                <hr />
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                @Html.HiddenFor(model => model.IDBanner)
                <div class="form-group">
                    @Html.Label("Hình ảnh", htmlAttributes: new { @class = "control-label col-md-1" })
                    <div class="col-md-5">
                        @if (!string.IsNullOrEmpty(Model.ImgBanner))
                        {
                            <!-- Nếu có hình ảnh được tải lên trước đó, hiển thị nút chỉnh sửa hình ảnh -->
                            <button type="button" id="btnChangeImage" class="btn btn-default">Chỉnh sửa </button>
                            <input type="file" name="img" id="img" accept=".jpg,.png,.gif,.jpeg,.bmp" style="display: none;" />
                            <img id="imgPreview" src="~/Upload/images/Banner/@Model.ImgBanner" width="500px" />
                        }
                        else
                        {
                            <!-- Nếu không có hình ảnh được tải lên trước đó, hiển thị input file để tải lên hình ảnh mới -->
                            <input type="file" name="img" id="img" accept=".jpg,.png,.gif,.jpeg,.bmp" />
                        }
                    </div>
                </div>
                 <div class="form-group">
                     @Html.Label("Hiển thị", htmlAttributes: new { @class = "control-label col-md-1" })
                     <div class="col-md-10">
                         <div class="checkbox">
                             @{
                                 bool hide = (Model.hide.GetValueOrDefault(false) ? true : false);
                             }
                             @Html.CheckBoxFor(model => hide)
                         </div>
                     </div>
                 </div>
                <hr />
                <div class="form-group">
                    <div class="col-md-offset-1 col-md-10">
                        <input type="submit" value="Save" class="btn btn-primary" />
                        <div class="btn btn-secondary">
                            @Html.ActionLink("Trở về", "Index")
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
</div>
<script>
    $(document).ready(function () {
        // Khi người dùng click vào nút chỉnh sửa hình ảnh
        $('#btnChangeImage').click(function () {
            // Hiển thị input file để người dùng có thể tải lên hình ảnh mới
            $('#img').show();
            // Ẩn nút chỉnh sửa hình ảnh
            $(this).hide();
            // Ẩn hình ảnh hiện tại
            $('#imgPreview').hide();
        });
    });
            $(document).ready(function () {
        // Kiểm tra nếu có thông báo lỗi, hiển thị modal
        @if (TempData["ErrorMessage"] != null)
        {
            @:$('#errorModal').modal('show');
        }

    });
</script>

