@model TDTU_IT_alumni_management_system.Models.Administrator

@{
    ViewBag.Title = "ChangePassword";
    Layout = "~/Areas/Admin/Views/Shared/LayoutAdmin.cshtml";
}
<!-- Modal hiển thị thông báo lỗi -->
<div class="modal fade" id="errorModal" tabindex="-1" role="dialog" aria-labelledby="errorModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title" id="errorModalLabel">Lỗi</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <!-- Hiển thị thông báo lỗi -->
                <p>@TempData["ErrorMessage"]</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
            </div>
        </div>
    </div>
</div>

<div class="panel panel-default">
    <div class="panel-body">
        @using (Html.BeginForm("ChangePassword", "Account", FormMethod.Post))
        {
            @Html.AntiForgeryToken()
            <div class="form-group">
                <label for="current-password" class="control-label">Mật khẩu hiện tại:</label>
                <input type="password" class="form-control" id="current-password" name="CurrentPassword" placeholder="Nhập mật khẩu hiện tại">
            </div>
            <div class="form-group">
                <label for="new-password" class="control-label">Mật khẩu mới:</label>
                <input type="password" class="form-control" id="new-password" name="NewPassword" placeholder="Nhập mật khẩu mới">
            </div>
            <div class="form-group">
                <label for="confirm-password" class="control-label">Xác nhận mật khẩu mới:</label>
                <input type="password" class="form-control" id="confirm-password" name="ConfirmPassword" placeholder="Xác nhận mật khẩu mới">
                <span id="password-mismatch" style="display:none; color:red;">Mật khẩu không trùng khớp</span>
            </div>
            <button type="submit" class="btn btn-primary btn-lg btn-block">Đổi mật khẩu</button>
        }
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var confirmPasswordInput = document.getElementById('confirm-password');
        var passwordMismatchMessage = document.getElementById('password-mismatch');

        confirmPasswordInput.addEventListener('input', function () {
            var newPasswordInput = document.getElementById('new-password').value;
            var confirmPassword = confirmPasswordInput.value;

            if (newPasswordInput !== confirmPassword) {
                passwordMismatchMessage.style.display = 'block';
            } else {
                passwordMismatchMessage.style.display = 'none';
            }
        });
    });
     $(document).ready(function () {
     @if (TempData["ErrorMessage"] != null)
     {
         @:$('#errorModal').modal('show');
     }
});
</script>